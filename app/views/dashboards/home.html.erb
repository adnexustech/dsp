<% content_for :breadcrumb do %>
<!-- Breadcrumb hidden on dashboard -->
<%end%>

<% content_for :main_body do %>
<div class="page-content">
  <!-- Welcome Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-white mb-2">Welcome back, <%= current_user.name %></h1>
    <p class="text-gray-400">Here's what's happening with your campaigns today.</p>
  </div>

  <!-- Stats Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <div class="stat-card">
      <div class="flex items-center justify-between mb-2">
        <span class="text-gray-400 text-sm font-medium">Total Campaigns</span>
        <i class="fa fa-flag-o text-gray-500 text-xl"></i>
      </div>
      <div class="stat-value"><%= Campaign.count %></div>
      <p class="text-gray-500 text-xs mt-2">Active campaigns</p>
    </div>

    <div class="stat-card">
      <div class="flex items-center justify-between mb-2">
        <span class="text-gray-400 text-sm font-medium">Total Banners</span>
        <i class="fa fa-bookmark-o text-gray-500 text-xl"></i>
      </div>
      <div class="stat-value"><%= Banner.count %></div>
      <p class="text-gray-500 text-xs mt-2">Display creatives</p>
    </div>

    <div class="stat-card">
      <div class="flex items-center justify-between mb-2">
        <span class="text-gray-400 text-sm font-medium">Total Videos</span>
        <i class="fa fa-file-video-o text-gray-500 text-xl"></i>
      </div>
      <div class="stat-value"><%= BannerVideo.count %></div>
      <p class="text-gray-500 text-xs mt-2">Video creatives</p>
    </div>

    <div class="stat-card">
      <div class="flex items-center justify-between mb-2">
        <span class="text-gray-400 text-sm font-medium">Targeting Rules</span>
        <i class="fa fa-crosshairs text-gray-500 text-xl"></i>
      </div>
      <div class="stat-value"><%= Target.count %></div>
      <p class="text-gray-500 text-xs mt-2">Active targets</p>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="mb-8">
    <h2 class="text-xl font-semibold text-white mb-4">Quick Actions</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <a href="/campaigns/new" class="card hover:border-gray-700 transition-all">
        <div class="flex items-center">
          <i class="fa fa-plus-circle text-gray-400 text-3xl mr-4"></i>
          <div>
            <h3 class="font-semibold text-white">New Campaign</h3>
            <p class="text-gray-400 text-sm">Create a new advertising campaign</p>
          </div>
        </div>
      </a>

      <a href="/banners/new" class="card hover:border-gray-700 transition-all">
        <div class="flex items-center">
          <i class="fa fa-image text-gray-400 text-3xl mr-4"></i>
          <div>
            <h3 class="font-semibold text-white">New Banner</h3>
            <p class="text-gray-400 text-sm">Upload a new display creative</p>
          </div>
        </div>
      </a>

      <a href="/banner_videos/new" class="card hover:border-gray-700 transition-all">
        <div class="flex items-center">
          <i class="fa fa-video-camera text-gray-400 text-3xl mr-4"></i>
          <div>
            <h3 class="font-semibold text-white">New Video</h3>
            <p class="text-gray-400 text-sm">Upload a new video creative</p>
          </div>
        </div>
      </a>
    </div>
  </div>

  <!-- Analytics Section -->
  <div>
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-xl font-semibold text-white">Campaign Analytics</h2>
      <%= form_tag dashboards_home_path, method: "get" do %>
        <input type="hidden" name="refresh" value="1"/>
        <button type="submit" class="btn btn-primary">
          <i class="fa fa-refresh mr-2"></i>
          Refresh Analytics
        </button>
      <%end%>
    </div>

    <% if @refresh %>
      <% @campaign_wins.keys.each do |region| %>
        <div class="mb-8">
          <%= render :partial => 'bidderalltable_es',
                      :locals => {
                          :region => region,
                          :bidder_status => @bidder_status[region]
                      }
          %>
        </div>
        <div class="mb-8">
          <%= render :partial => 'campaignalltable_es',
                      :locals => {
                          :region => region,
                          :pixels => @campaign_pixels[region],
                          :wins => @campaign_wins[region],
                          :bids => @campaign_bids[region],
                          :clicks => @campaign_clicks[region],
                      }
          %>
        </div>
      <%end%>
    <% else %>
      <div class="card text-center py-12">
        <i class="fa fa-bar-chart text-gray-600 text-5xl mb-4"></i>
        <p class="text-gray-400 mb-4">Click "Refresh Analytics" to load real-time campaign statistics</p>
      </div>
    <%end%>
  </div>
</div>
<%end%>

<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <title>Adnexus</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <%= favicon_link_tag 'favicon.png' %>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <%= stylesheet_link_tag "application.tailwind", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "styles/font-awesome.min" %>
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track' => true %>

    <style>
      /* Override legacy CSS with pure black shadcn-style theme */
      *, *::before, *::after {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
      }
      
      html, body {
        background-color: #000000 !important;
        color: #ffffff !important;
      }
      
      #wrapper, #page-wrapper, .page-content {
        background-color: #000000 !important;
      }
      
      /* Header & Topbar */
      #topbar {
        background-color: #000000 !important;
        border-bottom: 1px solid #262626 !important;
        height: 64px !important;
        padding: 0 16px !important;
        display: flex !important;
        justify-content: space-between !important;
        align-items: center !important;
      }

      .navbar-header {
        display: flex !important;
        align-items: center !important;
        gap: 16px !important;
      }

      .topbar-main {
        display: flex !important;
        align-items: center !important;
        gap: 16px !important;
        margin-left: auto !important;
      }

      .navbar-top-links {
        margin: 0 !important;
        padding: 0 !important;
        display: flex !important;
        align-items: center !important;
      }
      
      /* Vercel-style Logo */
      #logo {
        display: flex !important;
        align-items: center !important;
        gap: 12px !important;
        padding: 0 !important;
        margin: 0 !important;
        text-decoration: none !important;
        background: transparent !important;
      }
      
      #logo:hover {
        opacity: 0.8 !important;
      }
      
      .logo-container {
        width: 38px !important;
        height: 38px !important;
        background: #fafafa !important;
        border-radius: 10px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        padding: 6px !important;
        overflow: hidden !important;
      }
      
      .logo-image {
        width: 100% !important;
        height: 100% !important;
        object-fit: contain !important;
      }
      
      .logo-text {
        font-size: 18px !important;
        font-weight: 600 !important;
        color: #ffffff !important;
        letter-spacing: -0.025em !important;
      }
      
      @media (max-width: 640px) {
        .logo-text {
          display: none !important;
        }
      }
      
      /* Sidebar */
      #sidebar {
        background-color: #000000 !important;
        border-right: 1px solid #262626 !important;
        width: 240px !important;
        position: fixed !important;
        top: 64px !important;
        left: 0 !important;
        height: calc(100vh - 64px) !important;
        overflow-y: auto !important;
        transition: transform 0.3s ease !important;
      }
      
      /* Mobile sidebar hidden by default */
      @media (max-width: 768px) {
        #sidebar {
          transform: translateX(-100%) !important;
          z-index: 1000 !important;
        }
        
        body.sidebar-open #sidebar {
          transform: translateX(0) !important;
        }
        
        #page-wrapper {
          margin-left: 0 !important;
        }
      }
      
      /* Desktop sidebar always visible */
      @media (min-width: 769px) {
        #sidebar {
          transform: translateX(0) !important;
        }
        
        #page-wrapper {
          margin-left: 240px !important;
        }
      }
      
      /* Sidebar Menu Items */
      #sidebar #side-menu {
        padding: 16px 0 !important;
      }
      
      #sidebar #side-menu > li {
        margin: 2px 8px !important;
      }
      
      #sidebar #side-menu > li > a {
        display: flex !important;
        align-items: center !important;
        padding: 10px 12px !important;
        border-radius: 8px !important;
        color: #a0a0a0 !important;
        text-decoration: none !important;
        transition: all 0.2s ease !important;
        background: transparent !important;
      }
      
      #sidebar #side-menu > li > a:hover {
        background-color: #1a1a1a !important;
        color: #ffffff !important;
      }
      
      #sidebar #side-menu > li.active > a,
      #sidebar #side-menu > li > a.active {
        background-color: #1a1a1a !important;
        color: #ffffff !important;
      }
      
      #sidebar #side-menu .menu-title {
        display: inline-block !important;
        opacity: 1 !important;
        width: auto !important;
        font-size: 14px !important;
        font-weight: 500 !important;
        margin-left: 12px !important;
        overflow: visible !important;
      }
      
      #sidebar #side-menu i.fa {
        width: 20px !important;
        font-size: 16px !important;
        color: #a0a0a0 !important;
      }
      
      #sidebar #side-menu > li > a:hover i.fa,
      #sidebar #side-menu > li.active > a i.fa {
        color: #ffffff !important;
      }
      
      /* Hide icon backgrounds */
      .icon-bg {
        display: none !important;
      }
      
      /* Mobile menu toggle */
      .sidebar-toggle {
        background: transparent !important;
        border: 1px solid #262626 !important;
        color: #ffffff !important;
        padding: 8px 12px !important;
        border-radius: 8px !important;
        cursor: pointer !important;
        transition: all 0.2s ease !important;
      }
      
      .sidebar-toggle:hover {
        background-color: #1a1a1a !important;
        border-color: #404040 !important;
      }
      
      .sidebar-toggle i {
        font-size: 18px !important;
      }
      
      /* Hide desktop toggle on mobile */
      @media (max-width: 768px) {
        .sidebar-toggle.hidden-xs {
          display: none !important;
        }
      }
      
      /* Show mobile toggle only on mobile */
      @media (min-width: 769px) {
        .navbar-header .sidebar-toggle {
          display: none !important;
        }
      }
      
      /* User menu trigger */
      .user-menu-trigger {
        display: flex !important;
        align-items: center !important;
        gap: 12px !important;
        padding: 6px 12px !important;
        background: transparent !important;
        border: 1px solid #262626 !important;
        border-radius: 10px !important;
        transition: all 0.2s ease !important;
        text-decoration: none !important;
        color: #ffffff !important;
      }
      
      .user-menu-trigger:hover {
        background-color: #1a1a1a !important;
        border-color: #404040 !important;
      }
      
      .user-avatar {
        width: 32px !important;
        height: 32px !important;
        background: linear-gradient(135deg, #3b82f6, #8b5cf6) !important;
        border-radius: 8px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        font-weight: 600 !important;
        font-size: 12px !important;
        color: #ffffff !important;
        letter-spacing: 0.5px !important;
      }
      
      .user-info {
        display: flex !important;
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 2px !important;
      }
      
      .user-name {
        font-size: 14px !important;
        font-weight: 500 !important;
        color: #ffffff !important;
        line-height: 1 !important;
      }
      
      .user-org {
        font-size: 12px !important;
        color: #a0a0a0 !important;
        line-height: 1 !important;
      }
      
      .user-menu-trigger .fa-chevron-down {
        font-size: 12px !important;
        color: #a0a0a0 !important;
        transition: transform 0.2s ease !important;
      }
      
      .user-menu-trigger:hover .fa-chevron-down {
        color: #ffffff !important;
      }
      
      @media (max-width: 640px) {
        .user-info {
          display: none !important;
        }
      }
      
      /* Dropdown menu */
      .dropdown-menu {
        background-color: #0a0a0a !important;
        border: 1px solid #262626 !important;
        border-radius: 12px !important;
        padding: 8px !important;
        margin-top: 8px !important;
        min-width: 280px !important;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5) !important;
      }
      
      .dropdown-header {
        padding: 0 !important;
        background: transparent !important;
      }
      
      .user-header-info {
        display: flex !important;
        align-items: center !important;
        gap: 12px !important;
        padding: 12px !important;
        background: #0a0a0a !important;
        border-radius: 8px !important;
      }
      
      .user-header-avatar {
        width: 40px !important;
        height: 40px !important;
        background: linear-gradient(135deg, #3b82f6, #8b5cf6) !important;
        border-radius: 10px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        font-weight: 700 !important;
        font-size: 16px !important;
        color: #ffffff !important;
        letter-spacing: 0.5px !important;
        flex-shrink: 0 !important;
      }
      
      .user-header-details {
        flex: 1 !important;
        min-width: 0 !important;
      }
      
      .user-header-name {
        font-size: 14px !important;
        font-weight: 600 !important;
        color: #ffffff !important;
        margin-bottom: 4px !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
      }
      
      .user-header-email {
        font-size: 12px !important;
        color: #a0a0a0 !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
      }
      
      .dropdown-section-title {
        padding: 8px 12px 4px 12px !important;
        font-size: 11px !important;
        font-weight: 600 !important;
        color: #737373 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
      }
      
      .dropdown-menu li a {
        display: flex !important;
        align-items: center !important;
        gap: 10px !important;
        color: #d4d4d4 !important;
        padding: 10px 12px !important;
        border-radius: 8px !important;
        font-size: 14px !important;
        transition: all 0.2s ease !important;
        text-decoration: none !important;
      }
      
      .dropdown-menu li a i {
        width: 16px !important;
        font-size: 14px !important;
        color: #a0a0a0 !important;
      }
      
      .dropdown-menu li a:hover {
        background-color: #1a1a1a !important;
        color: #ffffff !important;
      }
      
      .dropdown-menu li a:hover i {
        color: #ffffff !important;
      }
      
      .dropdown-menu .divider {
        background-color: #262626 !important;
        margin: 6px 0 !important;
        height: 1px !important;
      }
      
      /* Buttons - shadcn style with 16px padding */
      .btn, button, input[type="submit"] {
        padding: 16px 24px !important;
        border-radius: 0.5rem !important;
        font-weight: 500 !important;
        font-size: 14px !important;
      }
      
      .btn-primary, button[type="submit"], input[type="submit"] {
        background-color: #fafafa !important;
        color: #0a0a0a !important;
        border: 1px solid #404040 !important;
      }
      
      .btn-primary:hover, button[type="submit"]:hover, input[type="submit"]:hover {
        background-color: #e5e5e5 !important;
        border-color: #525252 !important;
      }
      
      /* Dark mode toggle */
      .dark-mode-toggle {
        background: transparent !important;
        border: 1px solid #262626 !important;
        color: #ffffff !important;
        padding: 8px 12px !important;
        border-radius: 8px !important;
        cursor: pointer !important;
        transition: all 0.2s ease !important;
      }
      
      .dark-mode-toggle:hover {
        background-color: #1a1a1a !important;
        border-color: #404040 !important;
      }
      
      /* Overlay for mobile menu */
      .sidebar-overlay {
        display: none !important;
        position: fixed !important;
        top: 64px !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background-color: rgba(0, 0, 0, 0.5) !important;
        z-index: 999 !important;
      }
      
      @media (max-width: 768px) {
        body.sidebar-open .sidebar-overlay {
          display: block !important;
        }
      }
    </style>

    <%= csrf_meta_tags %>
    <%= javascript_importmap_tags %>
</head>
<body class="h-full dark" data-controller="darkmode sidebar">
    <div>
        <!--BEGIN BACK TO TOP-->
        <a id="totop" href="#"><i class="fa fa-angle-up"></i></a>
        <!--END BACK TO TOP-->
        <!--BEGIN TOPBAR-->
        <div id="header-topbar-option-demo" class="page-header-topbar">
            <nav id="topbar" role="navigation" style="margin-bottom: 0;" data-step="3" class="navbar navbar-default navbar-static-top">
            <div class="navbar-header">

               <button
                    type="button"
                    data-action="click->sidebar#toggleMobile"
                    class="sidebar-toggle"
                >
                    <i class="fa fa-bars"></i>
                </button>

                <a id="logo" href="/" class="navbar-brand">
                    <div class="logo-container">
                        <%= image_tag("logo.png", alt: "Adnexus", class: "logo-image") %>
                    </div>
                    <span class="logo-text">Adnexus</span>
                </a>
            </div>
            <div class="topbar-main">
                <button
                    type="button"
                    data-action="click->sidebar#toggle"
                    class="sidebar-toggle hidden-xs"
                >
                    <i class="fa fa-bars"></i>
                </button>
                <ul class="nav navbar navbar-top-links navbar-right mbn">
                    <!-- Credits Balance -->
                    <li class="credits-display" style="margin-right: 15px;">
                        <a href="/credits" style="display: flex; align-items: center; padding: 15px 10px;">
                            <i class="fa fa-dollar" style="font-size: 18px; margin-right: 8px; color: #28a745;"></i>
                            <div style="display: flex; flex-direction: column; line-height: 1.2;">
                                <span style="font-size: 16px; font-weight: 600; color: #28a745;">$<%= '%.2f' % current_user.credits_balance %></span>
                                <span style="font-size: 11px; color: #6c757d;">Credits</span>
                            </div>
                        </a>
                    </li>

                    <li class="dropdown topbar-user">
                        <a data-hover="dropdown" data-toggle="dropdown" href="#" class="dropdown-toggle user-menu-trigger">
                            <div class="user-avatar">
                                <%= current_user.name.split(' ').map(&:first).join.upcase %>
                            </div>
                            <div class="user-info">
                                <span class="user-name"><%=current_user.name%></span>
                                <span class="user-org">Personal Account</span>
                            </div>
                            <i class="fa fa-chevron-down"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user pull-right">
                            <li class="dropdown-header">
                                <div class="user-header-info">
                                    <div class="user-header-avatar">
                                        <%= current_user.name.split(' ').map(&:first).join.upcase %>
                                    </div>
                                    <div class="user-header-details">
                                        <div class="user-header-name"><%=current_user.name%></div>
                                        <div class="user-header-email"><%=current_user.email%></div>
                                    </div>
                                </div>
                            </li>
                            <li class="divider"></li>
                            <li class="dropdown-section-title">Account</li>
                            <li><a href="/myaccount"><i class="fa fa-user"></i>My Profile</a></li>
                            <li><a href="/credits"><i class="fa fa-dollar"></i>Credits & Billing</a></li>
                            <li><a href="#"><i class="fa fa-cog"></i>Settings</a></li>
                            <li class="divider"></li>
                            <li class="dropdown-section-title">Organization</li>
                            <li><a href="#"><i class="fa fa-building-o"></i>Switch Organization</a></li>
                            <li><a href="#"><i class="fa fa-users"></i>Team Members</a></li>
                            <li class="divider"></li>
                            <li><a href="/logout"><i class="fa fa-sign-out"></i>Log Out</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            </nav>
        </div>
        <!--END TOPBAR-->
        <div id="wrapper">
            <!--BEGIN SIDEBAR MENU-->
            <nav id="sidebar" role="navigation" data-step="2" data-intro="Template has &lt;b&gt;many navigation styles&lt;/b&gt;"
                data-position="right" class="navbar-default navbar-static-side">
            <div class="sidebar-collapse menu-scroll" style="overflow:initial">
                <ul id="side-menu" class="nav ">                    
                     <div class="clearfix"></div>
                    <li><a href="/dashboards"><i class="fa fa-tachometer fa-fw">
                        <div class="icon-bg bg-orange"></div>
                        </i><span class="menu-title">Dashboard</span></a>
                    </li>
                    <li><a href="/campaigns"><i class="fa fa-flag-o fa-fw">
                        <div class="icon-bg bg-pink"></div>
                        </i><span class="menu-title">Campaigns</span></a>                       
                    </li>
                    
                    <li><a href="/banners"><i class="fa fa-bookmark-o fa-fw">
                        <div class="icon-bg bg-green"></div>
                        </i><span class="menu-title">Banners</span></a>                       
                    </li>
                    
                    <li><a href="/banner_videos"><i class="fa fa-file-video-o fa-fw">
                        <div class="icon-bg bg-violet"></div>
                        </i><span class="menu-title">Videos</span></a>
                    </li>

                    <li><a href="/targets"><i class="fa fa-crosshairs fa-fw">
                        <div class="icon-bg bg-violet"></div>
                        </i><span class="menu-title">Targeting</span></a>
                    </li>

                    <li><a href="/rtb_standards"><i class="fa fa-code fa-fw">
                        <div class="icon-bg bg-violet"></div>
                        </i><span class="menu-title">Rules</span></a>
                    </li>

                    <li><a href="/lists"><i class="fa fa-upload fa-fw">
                        <div class="icon-bg bg-violet"></div>
                        </i><span class="menu-title">Sets</span></a>
                    </li>
                        
                     <li><a href="/help"><i class="fa fa-info fa-fw">
                        <div class="icon-bg bg-orange"></div>
                        </i><span class="menu-title">Documentation</span></a>
                    </li>

                     <li><a href="/credits"><i class="fa fa-dollar fa-fw">
                        <div class="icon-bg bg-green"></div>
                        </i><span class="menu-title">Credits</span></a>
                    </li>

                     <li><a href="/subscriptions"><i class="fa fa-credit-card fa-fw">
                        <div class="icon-bg bg-blue"></div>
                        </i><span class="menu-title">Billing & Plans</span></a>
                    </li>

                    <% if current_user.admin %>
                     <li><a href="/users"><i class="fa fa-users fa-fw">
                        <div class="icon-bg bg-orange"></div>
                        </i><span class="menu-title">Admin Users</span></a>                       
                    </li>
                     <li><a href="/categories"><i class="fa fa-folder fa-fw">
                        <div class="icon-bg bg-orange"></div>
                        </i><span class="menu-title">Admin Categories</span></a>                       
                    </li>
                     <li><a href="/documents"><i class="fa fa-file fa-fw">
                        <div class="icon-bg bg-orange"></div>
                        </i><span class="menu-title">Admin Documents</span></a>                       
                    </li>
                    <%end%>

                    
                </ul>
            </div>
            </nav>
            <!--END SIDEBAR MENU-->
            <!--BEGIN PAGE WRAPPER-->
            <div id="page-wrapper">
               <!--BEGIN TITLE & BREADCRUMB PAGE-->
                <div id="title-breadcrumb-option-demo" class="page-title-breadcrumb"> 
                    <%= yield(:breadcrumb) if content_for?(:breadcrumb) %>	
                    <div class="clearfix"></div>
                </div>
                <!--END TITLE & BREADCRUMB PAGE-->
                <!--BEGIN CONTENT-->
                <div class="page-content">
                    <p id="notice"><%= sanitize(notice, tags: %w(strong em br), attributes: []) if notice.present? %></p>
                    
                    <%= yield(:main_body) if content_for?(:main_body) %>	
                </div>
                <!--END CONTENT-->
            </div>
            <!--END PAGE WRAPPER-->
        </div>
    </div>
     <%= javascript_include_tag 'vendor_libs' %>
     <%= yield(:javascript) if content_for?(:javascript) %>

</body>
</html>
